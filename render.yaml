# Render 部署配置文件
# 文档: https://render.com/docs/blueprint-spec

services:
  # Web Service - Node.js 后端
  - type: web
    name: fertilizer-recommendation
    env: node
    region: singapore  # 新加坡区域，国内访问较快
    plan: free  # 免费套餐
    branch: main  # Git 分支
    buildCommand: npm install
    startCommand: node server.js
    healthCheckPath: /health
    
    # 环境变量
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
    
    # 自动部署
    autoDeploy: true
    
    # 磁盘存储（用于 SQLite 数据库和 GeoTIFF 文件）
    # 注意：免费套餐不包含持久存储，数据会在重启后丢失
    # 如需持久存储，需要升级到付费套餐
    # disk:
    #   name: data
    #   mountPath: /opt/render/project/data
    #   sizeGB: 1

# 数据库配置（可选 - Render 提供 PostgreSQL 免费套餐）
# databases:
#   - name: fertilizer-db
#     databaseName: fertilizer
#     user: fertilizer_user
#     plan: free
